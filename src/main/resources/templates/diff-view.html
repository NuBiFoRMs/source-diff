<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments.html :: head"></head>
<head>
    <link rel="stylesheet" type="text/css" href="/css/diff.css">
</head>
<body>

<div id="0"></div>

<div class="m-2 list-group" style="padding-top: 82px">
    <div class="fixed-top" style="background-color: white">
        <div class="mx-2 mt-2 list-group-item">
            <th:block th:each="path : ${parentPath}">
                <th:block th:if="${path.fileType.equals('D')}">
                    <a th:href="@{/explorer{path}(path=${path.filePath})}">
                        <th:block th:text="${path.fileName}">path.fileName</th:block></a> /
                </th:block>
                <th:block th:if="${path.fileType.equals('F')}">
                    <th:block th:text="${path.fileName}">path.fileName</th:block>
                </th:block>
            </th:block>
        </div>
        <div id="diff-nav" class="mx-2 list-group-item">
            <th:block th:each="line, index : ${diffList}">
                <a th:href="${'#' + (line - 10 < 0 ? 0 : line - 10)}" th:text="${index.count}">line</a>
            </th:block>
        </div>
    </div>

    <div class="list-group-item d-flex justify-content-between">
        <div class="d-flex" style="width: 100%; overflow-x: hidden">
            <div>
                <table class="mx-2 diffTable">
                    <th:block th:each="row : ${diff}">
                        <tr class="source d-flex justify-content-end"
                            th:id="${row.line}" th:if="${row.visible}">
                            <td class="text-muted" th:text="${row.newLine}">row.newLine</td>
                        </tr>
                    </th:block>
                </table>
            </div>

            <div style="width: 100%; overflow-x: auto">
                <table class="diffTable" style="width: 100%">
                    <th:block th:each="row : ${diff}">
                        <tr class="source"
                            th:id="${row.line}" th:if="${row.visible}"
                            th:classappend="${row.changeType.equals('C') ? 'trCreate' : row.changeType.equals('U') ? 'trUpdate' : row.changeType.equals('D') ? 'trDelete' : row.changeType.equals('S') ? 'trSkip text-muted' : ''}">
                            <td th:utext="${row.newSource}" style="white-space: pre" nowrap>row.newSource</td>
                        </tr>
                    </th:block>
                </table>
            </div>
        </div>

        <div class="d-flex" style="width: 100%; overflow-x: hidden">
            <div>
                <table class="mx-2 diffTable">
                    <th:block th:each="row : ${diff}">
                        <tr class="source d-flex justify-content-end"
                            th:id="${row.line}" th:if="${row.visible}">
                            <td class="text-muted" th:text="${row.oldLine}">row.oldLine</td>
                        </tr>
                    </th:block>
                </table>
            </div>

            <div style="width: 100%; overflow-x: auto">
                <table class="diffTable" style="width: 100%">
                    <th:block th:each="row : ${diff}">
                        <tr class="source"
                            th:id="${row.line}" th:if="${row.visible}"
                            th:classappend="${row.changeType.equals('C') ? 'trCreate' : row.changeType.equals('U') ? 'trUpdate' : row.changeType.equals('D') ? 'trDelete' : row.changeType.equals('S') ? 'trSkip text-muted' : ''}">
                            <td th:utext="${row.oldSource}" style="white-space: pre" nowrap>row.oldSource</td>
                        </tr>
                    </th:block>
                </table>
            </div>
        </div>
    </div>
</div>

</body>
</html>